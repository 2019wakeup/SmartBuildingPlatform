[INFO] Scanning for projects...
[INFO] 
[INFO] -------------------< org.example:SmartCloudPlatform >-------------------
[INFO] Building SmartCloudPlatform 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot:3.1.12:run (default-cli) > test-compile @ SmartCloudPlatform >>>
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ SmartCloudPlatform ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 7 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ SmartCloudPlatform ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ SmartCloudPlatform ---
[INFO] Copying 3 resources from src/test/resources to target/test-classes
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ SmartCloudPlatform ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] <<< spring-boot:3.1.12:run (default-cli) < test-compile @ SmartCloudPlatform <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot:3.1.12:run (default-cli) @ SmartCloudPlatform ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::               (v3.1.12)

2025-06-27T11:04:35.436+08:00  INFO 77022 --- [  restartedMain] o.e.s.SmartCloudPlatformApplication      : Starting SmartCloudPlatformApplication using Java 17.0.9 with PID 77022 (/Users/luhonggan/Desktop/SmartCloudPlatform/target/classes started by luhonggan in /Users/luhonggan/Desktop/SmartCloudPlatform)
2025-06-27T11:04:35.436+08:00 DEBUG 77022 --- [  restartedMain] o.e.s.SmartCloudPlatformApplication      : Running with Spring Boot v3.1.12, Spring v6.0.21
2025-06-27T11:04:35.436+08:00  INFO 77022 --- [  restartedMain] o.e.s.SmartCloudPlatformApplication      : No active profile set, falling back to 1 default profile: "default"
2025-06-27T11:04:35.451+08:00  INFO 77022 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-27T11:04:35.451+08:00  INFO 77022 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-27T11:04:35.913+08:00  INFO 77022 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-06-27T11:04:35.917+08:00  INFO 77022 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-27T11:04:35.917+08:00  INFO 77022 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.24]
2025-06-27T11:04:35.939+08:00  INFO 77022 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
2025-06-27T11:04:35.939+08:00  INFO 77022 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 488 ms
Logging initialized using 'class org.apache.ibatis.logging.stdout.StdOutImpl' adapter.
Can not find table primary key in Class: "org.example.smartcloudplatform.entity.RolePermissions".
2025-06-27T11:04:36.085+08:00  WARN 77022 --- [  restartedMain] c.b.m.core.injector.DefaultSqlInjector   : class org.example.smartcloudplatform.entity.RolePermissions ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
Can not find table primary key in Class: "org.example.smartcloudplatform.entity.UserRoles".
2025-06-27T11:04:36.099+08:00  WARN 77022 --- [  restartedMain] c.b.m.core.injector.DefaultSqlInjector   : class org.example.smartcloudplatform.entity.UserRoles ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
Get /10.190.5.89 network interface 
Get network interface info: name:en0 (en0)
Initialization Sequence datacenterId:24 workerId:14
 _ _   |_  _ _|_. ___ _ |    _ 
| | |\/|_)(_| | |_\  |_)||_|_\ 
     /               |         
                        3.5.8 
2025-06-27T11:04:36.136+08:00 DEBUG 77022 --- [  restartedMain] o.e.s.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-06-27T11:04:36.235+08:00  WARN 77022 --- [  restartedMain] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: a218e85d-ab41-43e1-a7d8-872eabbeec75

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-27T11:04:36.302+08:00  INFO 77022 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@411cb264, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@53c672f9, org.springframework.security.web.context.SecurityContextHolderFilter@6145866, org.springframework.security.web.header.HeaderWriterFilter@360df8ce, org.springframework.security.web.authentication.logout.LogoutFilter@50452b84, org.example.smartcloudplatform.config.JwtAuthenticationFilter@5ecf4925, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@26bade58, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@322a1f31, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@63ddcaad, org.springframework.security.web.session.SessionManagementFilter@77872e4e, org.springframework.security.web.access.ExceptionTranslationFilter@7cb86ab3, org.springframework.security.web.access.intercept.AuthorizationFilter@7d4df0be]
2025-06-27T11:04:36.390+08:00  INFO 77022 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-06-27T11:04:36.401+08:00  INFO 77022 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/api'
2025-06-27T11:04:36.405+08:00 DEBUG 77022 --- [   scheduling-1] o.e.s.config.ScheduleConfig              : 开始检查离线设备...
2025-06-27T11:04:36.405+08:00  INFO 77022 --- [  restartedMain] o.e.s.SmartCloudPlatformApplication      : Started SmartCloudPlatformApplication in 1.089 seconds (process running for 1.241)
2025-06-27T11:04:36.406+08:00  INFO 77022 --- [   scheduling-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a335906] was not registered for synchronization because synchronization is not active
2025-06-27T11:04:36.456+08:00  INFO 77022 --- [   scheduling-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@60725918
2025-06-27T11:04:36.457+08:00  INFO 77022 --- [   scheduling-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
JDBC Connection [HikariProxyConnection@890808031 wrapping com.mysql.cj.jdbc.ConnectionImpl@60725918] will not be managed by Spring
==>  Preparing: select u.userID, u.userName, u.account, u.password, u.email, u.phone, u.roleID, u.sampleID, u.create_by, u.create_time, u.update_by, u.update_time, u.remark from User u where u.account = ?
Creating a new SqlSession
Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97c660a]
JDBC Connection [HikariProxyConnection@1962610191 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e434dc8] will be managed by Spring
==>  Preparing: SELECT * FROM iot_device_status WHERE last_update_time < ? AND device_status = 'online'
==> Parameters: 2025-06-27T10:54:36.462089(LocalDateTime)
==> Parameters: admin(String)
<==      Total: 0
<==    Columns: userID, userName, account, password, email, phone, roleID, sampleID, create_by, create_time, update_by, update_time, remark
<==        Row: 1, 系统管理员, admin, $2a$10$GjK.9xMRSur8ufmjKKuKAuzOAgLHbWEy8/vhlsiKm8dHXoZWl.qfK, admin@example.com, 13888888888, 1, null, system, 2025-06-25 08:16:36, , 2025-06-27 02:47:47, null
<==      Total: 1
Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97c660a]
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a335906]
2025-06-27T11:04:36.482+08:00  INFO 77022 --- [   scheduling-1] o.e.s.s.impl.IoTDeviceStatusServiceImpl  : 离线设备状态检查完成: 更新设备数=0, 阈值分钟数=10
Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97c660a]
Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97c660a]
Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97c660a]
管理员用户已存在，重置密码为123456
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c0d5923] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1069112590 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e434dc8] will not be managed by Spring
==>  Preparing: SELECT COUNT( * ) AS total FROM iot_device_status
==> Parameters: 
<==    Columns: total
<==        Row: 3
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c0d5923]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145887af] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1085970461 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e434dc8] will not be managed by Spring
==>  Preparing: SELECT COUNT( * ) AS total FROM iot_device_status WHERE (device_status = ?)
==> Parameters: online(String)
<==    Columns: total
<==        Row: 0
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145887af]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3560fd9f] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@299685946 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e434dc8] will not be managed by Spring
==>  Preparing: SELECT COUNT( * ) AS total FROM iot_device_status WHERE (device_status = ?)
==> Parameters: offline(String)
<==    Columns: total
<==        Row: 3
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3560fd9f]
2025-06-27T11:04:36.502+08:00  INFO 77022 --- [   scheduling-1] o.e.s.config.ScheduleConfig              : 设备统计 - 总数: 3, 在线: 0, 离线: 3
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58848479] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@2050815550 wrapping com.mysql.cj.jdbc.ConnectionImpl@60725918] will not be managed by Spring
==>  Preparing: update User set password = ? where userName = ?
==> Parameters: $2a$10$S9nk2bo3.arWNueXq7JkHuTjAYHi6.9HZS/o2mRsIOJiTwemI6GfG(String), 系统管理员(String)
<==    Updates: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58848479]
管理员密码重置成功：账号=admin，密码=123456
智能云平台管理系统启动成功！
2025-06-27T11:05:14.373+08:00  INFO 77022 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-27T11:05:14.373+08:00  INFO 77022 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-27T11:05:14.374+08:00  INFO 77022 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-27T11:05:14.382+08:00 DEBUG 77022 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /auth/login
2025-06-27T11:05:14.386+08:00 DEBUG 77022 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-06-27T11:05:14.386+08:00 DEBUG 77022 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /auth/login
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@284f28e8] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@2141832354 wrapping com.mysql.cj.jdbc.ConnectionImpl@60725918] will not be managed by Spring
==>  Preparing: select u.userID, u.userName, u.account, u.password, u.email, u.phone, u.roleID, u.sampleID, u.create_by, u.create_time, u.update_by, u.update_time, u.remark from User u where u.account = ?
==> Parameters: admin(String)
<==    Columns: userID, userName, account, password, email, phone, roleID, sampleID, create_by, create_time, update_by, update_time, remark
<==        Row: 1, 系统管理员, admin, $2a$10$S9nk2bo3.arWNueXq7JkHuTjAYHi6.9HZS/o2mRsIOJiTwemI6GfG, admin@example.com, 13888888888, 1, null, system, 2025-06-25 08:16:36, , 2025-06-27 03:04:36, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@284f28e8]
2025-06-27T11:06:26.436+08:00  INFO 77022 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-27T11:06:26.440+08:00  INFO 77022 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
